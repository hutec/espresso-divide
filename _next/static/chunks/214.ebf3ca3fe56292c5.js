"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{3449:function(n,t,e){e.r(t),e.d(t,{default:function(){return I}});var r=e(5893),u=e(7294);const o=(0,u.createContext)(null),c=o.Provider;function a(){const n=(0,u.useContext)(o);if(null==n)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}var i=e(5243);function l(){return l=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},l.apply(this,arguments)}function s({bounds:n,boundsOptions:t,center:e,children:r,className:o,id:a,placeholder:s,style:f,whenReady:d,zoom:p,...y},h){const[m]=(0,u.useState)({className:o,id:a,style:f}),[v,b]=(0,u.useState)(null);(0,u.useImperativeHandle)(h,(()=>v?.map??null),[v]);const w=(0,u.useCallback)((r=>{if(null!==r&&null===v){const u=new i.Map(r,y);null!=e&&null!=p?u.setView(e,p):null!=n&&u.fitBounds(n,t),null!=d&&u.whenReady(d),b(function(n){return Object.freeze({__version:1,map:n})}(u))}}),[]);(0,u.useEffect)((()=>()=>{v?.map.remove()}),[]);const x=v?u.createElement(c,{value:v},r):s??null;return u.createElement("div",l({},m,{ref:w}),x)}const f=(0,u.forwardRef)(s);e(3935);function d(n,t,e){return Object.freeze({instance:n,context:t,container:e})}function p(n,t){return null==t?function(t,e){return(0,u.useRef)(n(t,e))}:function(e,r){const o=(0,u.useRef)(n(e,r)),c=(0,u.useRef)(e),{instance:a}=o.current;return(0,u.useEffect)((function(){c.current!==e&&(t(a,e,c.current),c.current=e)}),[a,e,r]),o}}function y(n,t){const e=(0,u.useRef)();(0,u.useEffect)((function(){return null!=t&&n.instance.on(t),e.current=t,function(){null!=e.current&&n.instance.off(e.current),e.current=null}}),[n,t])}function h(n,t){const e=n.pane??t.pane;return e?{...n,pane:e}:n}function m(n,t){(0,u.useEffect)((function(){return(t.layerContainer??t.map).addLayer(n.instance),function(){t.layerContainer?.removeLayer(n.instance),t.map.removeLayer(n.instance)}}),[t,n])}function v(n){return function(t){const e=a(),r=n(h(t,e),e);return function(n,t){const e=(0,u.useRef)(t);(0,u.useEffect)((function(){t!==e.current&&null!=n.attributionControl&&(null!=e.current&&n.attributionControl.removeAttribution(e.current),null!=t&&n.attributionControl.addAttribution(t)),e.current=t}),[n,t])}(e.map,t.attribution),y(r.current,t.eventHandlers),m(r.current,e),r}}function b(n){return function(t){const e=a(),r=n(h(t,e),e);return y(r.current,t.eventHandlers),m(r.current,e),function(n,t){const e=(0,u.useRef)();(0,u.useEffect)((function(){if(t.pathOptions!==e.current){const r=t.pathOptions??{};n.instance.setStyle(r),e.current=r}}),[n,t])}(r.current,t),r}}const w=function(n){function t(t,e){const{instance:r}=n(t).current;return(0,u.useImperativeHandle)(e,(()=>r)),null}return(0,u.forwardRef)(t)}(v(p((function({url:n,...t},e){return d(new i.TileLayer(n,h(t,e)),e)}),(function(n,t,e){const{opacity:r,zIndex:u}=t;null!=r&&r!==e.opacity&&n.setOpacity(r),null!=u&&u!==e.zIndex&&n.setZIndex(u)}))));function x(){return a().map}const j=function(n,t){return function(n){function t(t,e){const{instance:r,context:o}=n(t).current;return(0,u.useImperativeHandle)(e,(()=>r)),null==t.children?null:u.createElement(c,{value:o},t.children)}return(0,u.forwardRef)(t)}(b(p(n,t)))}((function({data:n,...t},e){const r=new i.GeoJSON(n,t);return d(r,(u=e,o={overlayContainer:r},Object.freeze({...u,...o})));var u,o}),(function(n,t,e){t.style!==e.style&&(null==t.style?n.resetStyle():n.setStyle(t.style))}));var g=e(1163),C=e(1864),E=e.n(C);function O(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function S(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,u,o=[],c=!0,a=!1;try{for(e=e.call(n);!(c=(r=e.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(i){a=!0,u=i}finally{try{c||null==e.return||e.return()}finally{if(a)throw u}}return o}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return O(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return O(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(n){var t=n.track,e=(0,u.useState)(0),o=e[0],c=e[1],a=x(),l=(0,g.useRouter)();return(0,u.useEffect)((function(){var n=E().join(l.basePath,t).replace(".gpx",".geojson");fetch(n).then((function(n){return n.json()})).then((function(n){c(n),i.bounds=function(n){var t=S(n.reduce((function(n,t){var e=S(t,2),r=e[0],u=e[1];return n[0]=Math.min(n[0],u),n[1]=Math.min(n[1],r),n[2]=Math.max(n[2],u),n[3]=Math.max(n[3],r),n}),[1/0,1/0,-1/0,-1/0]),4);return[[t[0],t[1]],[t[2],t[3]]]}(n.features[0].geometry.coordinates),a.fitBounds(i.bounds,{padding:[50,50]})}))}),[]),o?(0,r.jsx)(j,{data:o}):null};function I(n){var t=n.track;return(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"my-5 h-1/2",children:(0,r.jsxs)(f,{center:[51.505,-.09],zoom:4,scrollWheelZoom:!1,className:"h-96 w-full",children:[(0,r.jsx)(w,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,r.jsx)(R,{track:t})]})})})}}}]);